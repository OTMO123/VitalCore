# –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - Unicode –∫–æ–¥–∏—Ä–æ–≤–∫–∞
**–î–∞—Ç–∞:** 21 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ—à–µ–Ω–∏—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  

## –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–æ–±–ª–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ IRIS Healthcare Platform –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ 85.7% (6/7) –∏–∑-–∑–∞ —Å–±–æ—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ Unicode –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Å–µ—Ä–≤–∏—Å–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –ø—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏–Ω–∞.

## 5 Whys –∞–Ω–∞–ª–∏–∑ (Root Cause Analysis)

### –ü—Ä–æ–±–ª–µ–º–∞: Authentication Login... ERROR

**Why #1:** –ü–æ—á–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ERROR?
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ PowerShell —Ç–µ—Å—Ç–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ 200

**Why #2:** –ü–æ—á–µ–º—É –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π HTTP —Å—Ç–∞—Ç—É—Å?  
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 Unauthorized —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "Incorrect username or password"

**Why #3:** –ü–æ—á–µ–º—É API –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?
- –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç (password_hash verification = YES)
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–µ–±-API

**Why #4:** –ü–æ—á–µ–º—É –≤–µ–±-API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ?
- –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ UnicodeEncodeError –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**Why #5:** –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç UnicodeEncodeError –≤ —Å–µ—Ä–≤–∏—Å–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏?
- **ROOT CAUSE:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ emoji —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ Windows —Å–∏—Å—Ç–µ–º–µ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π cp1251

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–∫–∏

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ Unicode:
```
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 32: character maps to <undefined>
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f3af' in position 32: character maps to <undefined>
```

### –ü—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω—ã–µ emoji —Å–∏–º–≤–æ–ª—ã –≤ –∫–æ–¥–µ:
- üîç (`\U0001f50d`) - AUTH SERVICE - USER LOOKUP
- üö´ (`\U0001f6ab`) - AUTH SERVICE - ACCOUNT INACTIVE  
- üéØ (`\U0001f3af`) - AUTH SERVICE - UPDATING USER LOGIN STATE
- ‚úÖ (`\U00002705`) - AUTH SERVICE - USER FOUND
- ‚ùå (`\U0000274c`) - AUTH SERVICE - INVALID PASSWORD
- üîí (`\U0001f512`) - AUTH SERVICE - ACCOUNT LOCKED
- üîë (`\U0001f511`) - AUTH SERVICE - VERIFYING PASSWORD
- üí• (`\U0001f4a5`) - AUTH SERVICE - CRITICAL ERROR

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚úÖ:
1. **–°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è:** 200 OK –æ—Ç–≤–µ—Ç—ã
2. **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Swagger + OpenAPI –¥–æ—Å—Ç—É–ø–Ω—ã
3. **–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:** –í—Å–µ 4 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –∑–∞—â–∏—â–µ–Ω—ã (403 –æ—Ç–≤–µ—Ç—ã)
4. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:** 43 –æ–±—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (15 auth + 18 healthcare + 10 clinical)
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û—Ç–ª–∏—á–Ω–∞—è (63ms —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞)
6. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL —Å 25 —Ç–∞–±–ª–∏—Ü–∞–º–∏ + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å admin

### –ù–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚ùå:
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API:** Unicode –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏–Ω–∞

## –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### –§–∞–∑–∞ 1: –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–í –ø—Ä–æ—Ü–µ—Å—Å–µ)
- [x] **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã:** Unicode —Å–∏–º–≤–æ–ª—ã –≤ –ª–æ–≥–∞—Ö
- [x] **–ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏ emoji —Å–∏–º–≤–æ–ª–æ–≤  
- [ ] **–ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö emoji —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ auth service
- [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –§–∞–∑–∞ 2: –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UTF-8 –¥–ª—è Windows –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:** –ó–∞–º–µ–Ω–∞ emoji –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã
- [ ] **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:** Unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–¥–∏—Ä–æ–≤–æ–∫

### –§–∞–∑–∞ 3: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è  
- [ ] **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ clinical workflows:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
- [ ] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è Unicode –æ—à–∏–±–æ–∫

## –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å admin —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
SELECT username, role, is_active, email_verified, failed_login_attempts 
FROM users WHERE username = 'admin';
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: admin | ADMIN | t | t | 0
```

### –°—Ç–∞—Ç—É—Å —Ç–∞–±–ª–∏—Ü:
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü:** 25 (–±—ã–ª–æ 20, –¥–æ–±–∞–≤–ª–µ–Ω–æ 5)
- **–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** organizations, clinical_workflows, clinical_workflow_steps, clinical_encounters, clinical_workflow_audit

### –ü—Ä–æ—Ü–µ—Å—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
1. ‚úÖ **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –£—Å–ø–µ—à–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:** is_active=True, email_verified=True  
3. ‚úÖ **–ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è:** –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
4. ‚ùå **Unicode –æ—à–∏–±–∫–∞:** –ü–∞–¥–∞–µ—Ç –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å emoji

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. –ó–∞–≤–µ—Ä—à–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö emoji —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ app/modules/auth/service.py
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
4. –î–æ—Å—Ç–∏—á—å 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- **–¢–µ–∫—É—â–∏–π:** 85.7% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å (6/7 —Ç–µ—Å—Ç–æ–≤)
- **–¶–µ–ª–µ–≤–æ–π:** 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å (7/7 —Ç–µ—Å—Ç–æ–≤)

## –£—Ä–æ–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
1. **Unicode —Å–∏–º–≤–æ–ª—ã:** –ù–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Windows cp1251 –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
2. **–°–∏—Å—Ç–µ–º–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:** –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∏
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–ò–∑–±–µ–≥–∞—Ç—å emoji –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º –∫–æ–¥–µ** 
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ASCII —Å–∏–º–≤–æ–ª—ã –¥–ª—è –ª–æ–≥–æ–≤**
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –û–° –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞—Ö**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è Windows –æ–∫—Ä—É–∂–µ–Ω–∏—è**

---
**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** Claude Code AI  
**–ú–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞:** 5 Whys Framework  
**–°—Ç–∞—Ç—É—Å:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞, —Ä–µ—à–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ